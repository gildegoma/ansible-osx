- name: Build my Workstation <3 <3 <3 :)
  hosts:
    - mac_box
    - linux_box

  tasks:

################################################
# First things
################################################

  - name: update homebrew formulaes and upgrade already installed software
    homebrew: update_homebrew=yes upgrade_all=yes
    tags: homebrew_upgrade_all
    when: software.homebrew.upgrade_all

################################################
# Low Level Stuff
################################################

  - include: "{{ os }}/openzfs.yml"
    tags: openzfs
    when: software.openzfs

################################################
# Base Tools
################################################

  - include: homebrew_extras.yml
    tags: homebrew_extras
    when: software.homebrew_extras

  - include: shell_tools.yml
    tags: shell_tools
    when: software.shell_tools

  - include: editor_tools.yml
    tags: editor_tools
    when: software.editor_tools

  - include: network_tools.yml
    tags: network_tools
    when: software.network_tools

  - include: git.yml
    tags: git
    when: software.git
    vars:
      git:
        user:
          fullname: 'Gilles Cornu'
          email:    'git@gilles.cornu.name'

  - include: nodejs.yml
    tags: nodejs
    when: software.nodejs
    vars:
      nodejs:
        global_packages:
          - bower
          - grunt-cli
          - git-travis
          - yo

  - include: sourcetree.yml
    tags: sourcetree
    when: software.sourcetree

################################################
# Virtualization Tools
################################################

  - include: packer.yml
    tags: packer
    when: software.packer

  - include: virtualbox.yml
    tags: virtualbox
    when: software.virtualbox
    vars:
      virtualbox:
        version: 4.3.20
        build:   96996

  - include: vagrant.yml
    tags: vagrant
    when: software.vagrant
    vars:
      vagrant:
        version: 1.7.1

################################################
# IDE, Editor, ...
################################################

  - include: intellij_idea.yml
    tags: intellij_idea
    when: software.intellij_idea

  - include: sublimetext.yml
    tags: sublimetext
    when: software.sublimetext

################################################
# Mandatory Optionals
################################################

  - include: spotify.yml
    tags: spotify
    when: software.spotify

################################################
# Office Material
################################################

  - include: libreoffice.yml
    tags: libreoffice
    when: software.libreoffice

################################################
# Last Things
################################################

  - include: home.yml
    tags: home
    when: software.home
